<!doctype html>
<html lang="">
    <head>
      <script src="https://cdn.dwolla.com/1/dwolla.js"></script>
    </head>
    <body>
      <form>
        <div>
          <label>Routing number</label>
          <input type="text" id="routingNumber" placeholder="273222226" />
        </div>
        <div>
          <label>Account number</label>
          <input type="text" id="accountNumber" placeholder="account number" />
        </div>
        <div>
          <label>Bank account name</label>
          <input type="text" id="name" placeholder="name" />
        </div>
        <div>
          <select name="type" id="type">
            <option value="checking">checking</option>
            <option value="savings">savings</option>
          </select>
        </div>
        <div>
          <input type="submit" value="Add Bank">
        </div>
      </form>

      <div id="logs">
      </div>
    </body>

    <script>
      window.onload = function(){
        runTest();
      }

      function runTest(){
        dwolla.configure('sandbox');

        var customerUrl = 'https://api-uat.dwolla.com/customers/28138609-30ff-4607-b28c-4a3872f8fd4a';

        var client = new dwolla.Client({id: 'a250b344-844d-41e1-80c0-211f196e50a7', secret: 'QgUYW8EYBwDWioWBOdGUi1kQvWh41PJd2yYCAyfkrWUvim5fqP', environment: 'sandbox',});

        //generate a token on dwolla.com/applications
        var accountToken = new client.Token({access_token: "boyUEt648u76lIsXqws17kMVBSp9k1UTnwY675mglaF8hcxQ5Q"});

        accountToken
            .post(`${customerUrl}/funding-sources-token`)
            .then(function(res) {
              res.body.token; // => 'Z9BvpNuSrsI7Ke1mcGmTT0EpwW34GSmDaYP09frCpeWdq46JUg'
            });
      }
    </script>




</html>
